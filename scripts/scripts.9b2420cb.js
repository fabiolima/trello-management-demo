"use strict";function CardComponent(){const a=this;a.$onInit=function(){a.card=JSON.parse(this.data)},a["delete"]=function(b){const c=window.confirm("Are you shure you want delete this card?");c&&Trello.del("/cards/"+b).then(function(){a.refresh()})}}function CardsListComponent(a){const b=this;b.showForm=!1,b.cardForm={name:null,due:new Date},b.$onInit=function(){b.getCards()},b.getCards=function(){Trello.lists.get(this.listId,{cards:"all"}).then(function(c){b.list=c,b.cards=c.cards,a.$apply()})},b.refresh=function(){b.getCards()},b.toggleForm=function(){b.showForm=!b.showForm},b.submit=function(c){const d=Object.assign(b.cardForm,{idList:b.listId});Trello.post("/cards",d).then(function(d){b.toggleForm(),b.cards.push(d),b.resetForm(c),a.$apply()})},b.resetForm=function(a){a.$setPristine(),b.cardForm={due:new Date}}}function TopbarComponent(a,b){b.$on("user.authenticated",function(b,c){a.user=c})}angular.module("trelloManagementApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider","$locationProvider",function(a,b){a.when("!#/",{controllerAs:"root",resolve:["$location",function(a){console.log("alo"),a.url("/#!/cusujjo")}]}).when("/login",{templateUrl:"views/login.html",controller:"LoginCtrl",controllerAs:"login"}).when("/boards",{templateUrl:"views/boards.html",controller:"BoardsCtrl",controllerAs:"boards",resolve:{authorize:["authFactory","$location",function(a,b){return a.authorized()?!0:void 0}]}}).when("/boards/:id",{templateUrl:"views/board-lists.html",controller:"BoardListsCtrl",controllerAs:"boards-lists",resolve:{authorize:["authFactory","$location",function(a,b){return a.authorized()?!0:void 0}]}}).otherwise("/login")}]).factory("authFactory",["$location",function(a){return{authorized:function(){return Trello.authorized()?!0:a.path("/login")}}}]),CardComponent.$inject=[],angular.module("trelloManagementApp").component("card",{templateUrl:"views/card.html",controller:CardComponent,bindings:{data:"@",refresh:"&refresh"}}),CardsListComponent.$inject=["$scope"],angular.module("trelloManagementApp").component("cardsList",{templateUrl:"views/cards-list.html",controller:CardsListComponent,bindings:{listId:"@",listName:"@"}}),TopbarComponent.$inject=["$scope","$rootScope"],angular.module("trelloManagementApp").component("topbar",{templateUrl:"views/topbar.html",controller:TopbarComponent}),angular.module("trelloManagementApp").controller("LoginCtrl",["$scope","$location","$rootScope",function(a,b,c){a.login=function(){Trello.authorize({type:"popup",name:"Trello Management Demo",scope:{read:"true",write:"true"},expiration:"never",success:this.authenticationSuccess,error:this.authenticationFailure})},a.authenticationSuccess=function(){Trello.members.get("me").then(function(d){c.$emit("user.authenticated",d),b.path("/boards"),a.$apply()})},a.authenticationFailure=function(){window.alert("Authentication failed.")}}]),angular.module("trelloManagementApp").controller("BoardsCtrl",["$scope","$location",function(a,b){this.$onInit=function(){Trello.members.get("/me/boards").then(function(b){a.boards=b,a.$apply()})},a.go=function(a){b.url("/board/"+a)}}]),angular.module("trelloManagementApp").controller("BoardListsCtrl",["$scope","$location","$rootScope","$routeParams",function(a,b,c,d){this.$onInit=function(){Trello.boards.get(d.id,{lists:"all"}).then(function(b){a.currentBoard=b,a.lists=b.lists,a.$apply()})}}]),angular.module("trelloManagementApp").run(["$templateCache",function(a){a.put("views/board-lists.html",'<section ng-controller="BoardListsCtrl" class="boards-page"> <h3 class="section-title">Lists of {{ currentBoard.name }} board</h3> <ul class="lists"> <li class="list" ng-repeat="list in lists"> <cards-list list-id="{{ list.id }}" list-name="{{ list.name }}"></cards-list> </li> </ul> </section>'),a.put("views/boards.html",'<section ng-controller="BoardsCtrl" class="boards-page"> <h3 class="section-title">Boards</h3> <ul class="boards"> <li class="board" ng-repeat="board in boards"> <a ng-href="/#!/boards/{{board.id}}" class="title">{{ board.name }}</a> </li> </ul> </section>'),a.put("views/card.html",'<div class="trello-card"> <div class="info"> <span ng-if="$ctrl.card.badges.due" class="due"> Due: {{ $ctrl.card.badges.due | date }} </span> <span class="name"> {{ $ctrl.card.name }} </span> <div class="labels"> <span ng-repeat="label in $ctrl.card.labels" class="label label-default" style="background-color: {{ label.color }}"> {{ label.name || \'\' }} </span> </div> </div> <div class="actions"> <span class="action"> <i class="fa fa-edit"></i> </span> <span class="action"> <i class="fa fa-eye"></i> </span> <span class="action" ng-click="$ctrl.delete($ctrl.card.id)"> <i class="fa fa-trash"></i> </span> </div> </div>'),a.put("views/cards-list.html",'<div class="panel panel-primary"> <div class="panel-heading"> <span class="title">{{ $ctrl.listName }}</span> <span class="action"><a href="" ng-click="$ctrl.toggleForm()" class="btn btn-link">Add card</a></span> </div> <div class="panel-body"> <form name="cardForm" ng-submit="$ctrl.submit(cardForm)" class="card-form" ng-if="$ctrl.showForm"> <div class="form-group"> <label for="name">Name</label> <input ng-model="$ctrl.cardForm.name" type="text" class="form-control" id="name" placeholder="Insert a task to work on"> </div> <div class="form-group"> <label for="due">Due</label> <input ng-model="$ctrl.cardForm.due" type="date" class="date form-control" id="due" placeholder="Password"> </div> <button type="submit" class="btn btn-primary">Submit</button> <button type="button" ng-click="$ctrl.toggleForm()" class="btn btn-default">Cancel</button> </form> <card ng-repeat="card in $ctrl.cards" data="{{ card }}" refresh="$ctrl.refresh()"> <span class="empty" ng-if="$ctrl.cards.length < 1"> This list is empty :( </span> </div> </div>'),a.put("views/login.html",'<section ng-controller="LoginCtrl" class="login vh-center"> <div> <h4>Please login at Trello to start this demo :)</h4> <div> <button ng-click="login()" class="mx-center btn btn-link">Login</button> </div> </div> </section>'),a.put("views/main.html",'<section class="login"> <button ng-click="login()" class="btn btn-success">Login</button> </section>'),a.put("views/teste.html",'<section ng-controller="TesteCtrl" class="boards-page"> <ul class="boards"> <li class="board" ng-repeat="board in boards"> <a ng-href="/teste" class="title">{{ board.name }}</a> </li> </ul> </section>'),a.put("views/topbar.html",'<header class="flex-row container header"> <h1 class="title">Trello Management</h1> <span ng-if="user">Welcome, FÃ¡bio</span> </header>')}]);